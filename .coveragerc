[run]
branch = True
source = src
omit =
  src/MasterPy_Trading.py
  src/ib_Trader.py
  src/**/deprecated_*.py
  src/Ib_Manual_Attempt.py
  src/MasterPy.py
  src/ib_Main.py
  src/ib_Warror_dl.py
  src/migration_helper.py
  src/notifications.py
  src/infra/async_utils_legacy.py
  src/infra/contract_factories.py
  src/infra/ib_requests.py
  src/infra/ib_client.py
  # Hard-to-unit-test infrastructure and monitoring modules (tracked separately)
  src/core/performance.py
  src/core/integrated_error_handling.py
  src/core/connection_pool.py
  src/core/error_handler.py
  src/core/retry_manager.py
  src/risk/ml_risk_manager.py
  src/domain/interfaces.py
  src/infra/*
  src/data/pandas_helpers.py
  src/data/parquet_repository.py
  src/tools/*
  src/types/*
  tests/*
  */.venv/*
  */venv/*
  # Legacy monolithic core (scheduled for deprecation / refactor Phase 2)
   src/core/modern_trading_core.py
  # Heavy IB integration layers not reliably testable in unit CI without real gateway
   src/lib/ib_async_wrapper.py
   src/lib/ib_insync_compat.py
  # Phase 2 service layer (currently unmodernized & pending redesign)
   src/services/*.py
   src/services/historical_data/*.py
   src/services/market_data/*.py
   src/services/market_data_service.py
   src/services/historical_data_service.py
   src/services/market_info_service.py
   src/services/order_management_service.py
   src/services/path_service.py
   src/services/request_manager_service.py
   src/services/service_manager.py
   src/services/stock_split_detection_service.py

[report]
show_missing = True
skip_covered = True
precision = 1
exclude_lines =
  pragma: no cover
  if __name__ == .__main__.
  except ModuleNotFoundError:
  if TYPE_CHECKING:
